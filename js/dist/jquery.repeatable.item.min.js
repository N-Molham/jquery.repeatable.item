/*!
 * Repeatable list item 1.5.0 (http://n-molham.github.io/jquery.repeatable.item/)
 * Copyright 2014 Nabeel Molham (http://nabeel.molham.me).
 * Licensed under MIT License (http://opensource.org/licenses/MIT)
 */
!function(){jQuery(function(a){a.fn.repeatable_item=function(b){if("object"!=typeof doT)throw"doT.js Template engine not found, click here https://github.com/olado/doT";b=a.extend({init:function(){},completed:function(){},new_item:function(){},removed:function(){}},b);var c={clean_template_holders:function(a){var b=a.replace(/\{[a-zA-Z0-9_\-]+\}/g,"");return b=b.replace(doT.templateSettings.evaluate,""),b=b.replace(doT.templateSettings.interpolate,""),b=b.replace(doT.templateSettings.encode,""),b=b.replace(doT.templateSettings.use,""),b=b.replace(doT.templateSettings.define,""),b=b.replace(doT.templateSettings.conditional,""),b=b.replace(doT.templateSettings.iterate,"")},add_item:function(a,c,d){a.settings.is_empty&&(a.settings.is_empty=!1,a.find(".repeatable-empty").remove());var e=a.item_template.clone(),f=e.html();switch(typeof d){case"undefined":f=a.item_template_dot(a.settings.defaultItem);break;case"object":f=a.item_template_dot(d);break;default:f=f.replace(new RegExp("{"+a.settings.valueKeyName+"}","g"),d)}f=f.replace(new RegExp("{"+a.settings.indexKeyName+"}","g"),c),f=this.clean_template_holders(f),e.html(f).appendTo(a),a.settings.startIndex=parseInt(c)+1,a.trigger("repeatable-new-item",[a,e,c,d]),b.new_item(a,e,c,d)}};return this.each(function(d,e){var f=a(e);if(f.trigger("repeatable-init"),b.init(f),f.settings=a.extend({startIndex:0,indexKeyName:"index",valueKeyName:"value",addButtonLabel:"Add New",addButtonClass:"btn btn-primary",wrapperClass:"repeatable-wrapper",confirmRemoveMessage:"Are Your Sure ?",confirmRemove:"no",emptyListMessage:"No Items Found",defaultItem:{},values:[],is_empty:!0},f.data()),f.wrap('<div class="'+f.settings.wrapperClass+'" />'),f.settings.startIndex=parseInt(f.settings.startIndex),f.item_template=f.find("> [data-template=yes]").removeAttr("data-template").remove(),1!==f.item_template.length)throw"Repeatable Exception: Template item not found.";if(f.item_template_dot=doT.template(f.item_template.outerHTML()),f.item_template.remove_selector=f.item_template.prop("tagName").toLowerCase(),f.item_template.is("[class]")&&(f.item_template.remove_selector+='[class*="'+f.item_template.prop("className")+'"]'),a('<p class="add-wrapper"><a href="#" class="'+f.settings.addButtonClass+'">'+f.settings.addButtonLabel+"</a></p>").insertAfter(f).on("click",function(a){a.preventDefault(),c.add_item(f,f.settings.startIndex)}),"object"==typeof f.settings.values){var g=[];a.each(f.settings.values,function(a,b){"undefined"!=typeof b.order_index&&(a=parseInt(b.order_index)),g.push(a),c.add_item(f,a,b),f.settings.is_empty=!1}),g.length&&(f.settings.startIndex=Math.max.apply(Math,g)+1)}f.settings.is_empty&&"no"!=f.settings.emptyListMessage&&f.append('<li class="repeatable-empty">'+f.settings.emptyListMessage+"</li>"),f.on("click","[data-remove=yes]",function(c){if(c.preventDefault(),"yes"==f.settings.confirmRemove&&!confirm(f.settings.confirmRemoveMessage))return!1;var d=a(c.currentTarget).closest(f.item_template.remove_selector).remove();f.trigger("repeatable-removed",[f,d]),b.removed(f,d)}),f.trigger("repeatable-completed",[f]),b.completed(f)}),this},a.fn.outerHTML||(a.fn.outerHTML=function(){return a("<div />").append(this.eq(0).clone()).html()})})}(window);