/*!
 * Repeatable list item 1.5.0 (http://n-molham.github.io/jquery.repeatable.item/)
 * Copyright 2014 Nabeel Molham.
 * Licensed under MIT License (http://opensource.org/licenses/MIT)
 */
!function(){jQuery(function(a){a.fn.repeatable_item=function(b){if("object"!=typeof doT)throw"doT.js Template engine not found, click here https://github.com/olado/doT";b=a.extend({init:function(){},completed:function(){},new_item:function(){},removed:function(){}},b);var c={add_item:function(a,c,d,e){c.settings.is_empty&&(c.settings.is_empty=!1,c.find(".repeatable-empty").remove());var f=a.clone(),g=f.html().replace(new RegExp("{"+c.settings.indexKeyName+"}","g"),d);switch(typeof e){case"undefined":break;case"object":for(var h in e)g=g.replace(new RegExp("{"+h+"}","g"),e[h]);break;default:g=g.replace(new RegExp("{"+c.settings.valueKeyName+"}","g"),e)}g=g.replace(/{[a-zA-Z0-9_\-]+}/g,""),f.html(g).appendTo(c),c.settings.startIndex=parseInt(d)+1,c.trigger("repeatable-new-item",[c,f,d,e]),b.new_item(c,f,d,e)},array_keys:function(a,b,c){var d="undefined"!=typeof b,e=[],f=!!c,g=!0,h="";if(a&&"object"==typeof a&&a.change_key_case)return a.keys(b,c);for(h in a)a.hasOwnProperty(h)&&(g=!0,d&&(f&&a[h]!==b?g=!1:a[h]!=b&&(g=!1)),g&&(e[e.length]=h));return e},array_max:function(){var a,b,c=0,d=0,e=arguments,f=e.length,g=function(a){if("[object Array]"===Object.prototype.toString.call(a))return a;var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(a[c]);return b},h=function(a,b){var c=0,d=0,e=0,f=0,i=0;if(a===b)return 0;if("object"==typeof a){if("object"==typeof b){if(a=g(a),b=g(b),i=a.length,f=b.length,f>i)return 1;if(i>f)return-1;for(c=0,d=i;d>c;++c){if(e=h(a[c],b[c]),1==e)return 1;if(-1==e)return-1}return 0}return-1}return"object"==typeof b?1:isNaN(b)&&!isNaN(a)?0===a?0:0>a?1:-1:isNaN(a)&&!isNaN(b)?0===b?0:b>0?1:-1:b==a?0:b>a?1:-1};if(0===f)throw new Error("At least one value should be passed to max()");if(1===f){if("object"!=typeof e[0])throw new Error("Wrong parameter count for max()");if(a=g(e[0]),0===a.length)throw new Error("Array must contain at least one element for max()")}else a=e;for(b=a[0],c=1,d=a.length;d>c;++c)1==h(b,a[c])&&(b=a[c]);return b}};return this.each(function(d,e){var f=a(e);if(f.trigger("repeatable-init"),b.init(f),f.settings=a.extend({startIndex:0,indexKeyName:"index",valueKeyName:"value",addButtonLabel:"Add New",addButtonClass:"btn btn-primary",wrapperClass:"repeatable-wrapper",confirmRemoveMessage:"Are Your Sure ?",confirmRemove:"no",emptyListMessage:"No Items Found",values:[],is_empty:!0},f.data()),f.wrap('<div class="'+f.settings.wrapperClass+'" />'),f.settings.startIndex=parseInt(f.settings.startIndex),f.item_template=f.find("> [data-template=yes]").removeAttr("data-template").remove(),1!==f.item_template.length)throw"Repeatable Exception: Template item not found.";if(f.item_template.remove_selector=f.item_template.prop("tagName").toLowerCase(),f.item_template.remove_selector+='[class*="'+f.item_template.prop("className")+'"]',a('<p class="add-wrapper"><a href="#" class="'+f.settings.addButtonClass+'">'+f.settings.addButtonLabel+"</a></p>").insertAfter(f).on("click",function(a){a.preventDefault(),c.add_item(f.item_template,f,f.settings.startIndex)}),"object"==typeof f.settings.values){var g=[];a.each(f.settings.values,function(a,b){"undefined"!=typeof b.order_index&&(a=parseInt(b.order_index)),g.push(a),c.add_item(f.item_template,f,a,b),f.settings.is_empty=!1}),g.length&&(f.settings.startIndex=Math.max.apply(Math,g)+1)}f.settings.is_empty&&"no"!=f.settings.emptyListMessage&&f.append('<li class="repeatable-empty">'+f.settings.emptyListMessage+"</li>"),f.on("click","[data-remove=yes]",function(c){if(c.preventDefault(),"yes"==f.settings.confirmRemove&&!confirm(f.settings.confirmRemoveMessage))return!1;var d=a(c.currentTarget).closest(f.item_template.remove_selector).remove();f.trigger("repeatable-removed",[f,d]),b.removed(f,d)}),f.trigger("repeatable-completed",[f]),b.completed(f)}),this}})}(window);